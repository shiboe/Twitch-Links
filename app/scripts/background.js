!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=9)}([,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxDuration=9e5},,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ActiveTab=class{constructor(e){this.tab=e,this.id=e.id,this.twitch=this.isTwitch(e),this.streamer=this.twitch?this.getStreamer(e.url):null}isTwitch(e){if(!e.url)return!1;const t=e.url.split("/")[2];return"go.twitch.tv"===t||"www.twitch.tv"===t}getStreamer(e){const t=e.split("/");return t.length>=4?t[3]:null}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(2);t.LinkManager=class{constructor(){this.streamerLinks={},this.hiddenLinks=[],this.savedLinks=[]}add(e,t){this.streamerLinks[t]||(this.streamerLinks[t]={}),e.forEach(e=>{this.streamerLinks[t][e]=Date.now()})}hide(e){-1===this.hiddenLinks.indexOf(e)&&this.hiddenLinks.push(e)}unHide(e){const t=this.hiddenLinks.indexOf(e);t>=0&&this.hiddenLinks.splice(t,1)}save(e){-1===this.savedLinks.indexOf(e)&&this.savedLinks.push(e)}unSave(e){const t=this.savedLinks.indexOf(e);t>=0&&this.savedLinks.splice(t,1)}getLinks(e){return this.removeOldLinks(),this.streamerLinks[e]?(console.log("streamer",e,this.streamerLinks[e]),Object.keys(this.streamerLinks[e]).map(t=>({url:t,created:this.streamerLinks[e][t],hidden:this.hiddenLinks.indexOf(t)>=0,saved:this.savedLinks.indexOf(t)>=0}))):[]}getLinkCount(e){return this.streamerLinks[e]?Object.keys(this.streamerLinks[e]).length:0}removeOldLinks(){Object.keys(this.streamerLinks).forEach(e=>{Object.keys(this.streamerLinks[e]).forEach(t=>{const s=this.streamerLinks[e][t];Date.now()-s>=i.maxDuration&&delete this.streamerLinks[e][t]})})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(8),n=s(7),r=new i.LinkManager;var a;chrome.runtime.onMessage.addListener((e,t,s)=>{let i=!1;e&&"addLinks"==e.type&&r.add(e.links,e.streamer),e&&"hideLink"==e.type&&(r.hide(e.link),i=!0),e&&"unHideLink"==e.type&&(r.unHide(e.link),i=!0),e&&"saveLink"==e.type&&r.save(e.link),e&&"unSaveLink"==e.type&&r.unSave(e.link);const a=new n.ActiveTab(t.tab);if(a.twitch&&a.streamer){const e=r.getLinks(a.streamer);chrome.tabs.sendMessage(t.tab.id,{type:"updateLinks",links:e,force:i}),chrome.browserAction.setBadgeText({text:e.length.toString()})}}),chrome.tabs.onActivated.addListener(function(e){chrome.tabs.get(e.tabId,e=>{const t=new n.ActiveTab(e);let s="";if(t.twitch&&t.streamer){const e=r.getLinkCount(t.streamer);e&&(s=e.toString())}chrome.browserAction.setBadgeText({text:s})})}),chrome.browserAction.onClicked.addListener(e=>{const t=new n.ActiveTab(e),s=a;a&&(chrome.tabs.sendMessage(a,{type:"hideLinks"}),a=null),t.twitch&&t.streamer&&t.id!==s&&(a=t.id,chrome.tabs.sendMessage(t.id,{type:"showLinks",links:r.getLinks(t.streamer)}))})}]);